# å›½é™…åŒ– (i18n) è¯­è¨€æ–‡ä»¶ç®¡ç†

æœ¬ç›®å½•åŒ…å«é¡¹ç›®çš„æ‰€æœ‰å›½é™…åŒ–ç¿»è¯‘èµ„æºã€‚

## ç›®å½•ç»“æ„

```
locales/
â”œâ”€â”€ README.md              # æœ¬æ–‡æ¡£
â”œâ”€â”€ languages.ts           # è¯­è¨€é…ç½®å’Œç±»å‹å®šä¹‰
â”œâ”€â”€ index.ts              # ç¿»è¯‘èµ„æºåŠ è½½å™¨
â”œâ”€â”€ zh-CN/                # ç®€ä½“ä¸­æ–‡ç¿»è¯‘
â”‚   â”œâ”€â”€ common.json       # é€šç”¨æ–‡æœ¬
â”‚   â”œâ”€â”€ menu.json         # èœå•å¯¼èˆª
â”‚   â”œâ”€â”€ dataCenter.json   # æ•°æ®ä¸­å¿ƒæ¨¡å—
â”‚   â””â”€â”€ ...               # å…¶ä»–æ¨¡å—
â””â”€â”€ en-US/                # è‹±æ–‡ç¿»è¯‘
    â”œâ”€â”€ common.json
    â”œâ”€â”€ menu.json
    â”œâ”€â”€ dataCenter.json
    â””â”€â”€ ...
```

## å¦‚ä½•æ·»åŠ æ–°è¯­è¨€

### æ­¥éª¤ 1: åœ¨ `languages.ts` ä¸­æ³¨å†Œæ–°è¯­è¨€

æ‰“å¼€ `languages.ts`ï¼Œåœ¨ `SUPPORTED_LANGUAGES` æ•°ç»„ä¸­æ·»åŠ æ–°è¯­è¨€é…ç½®ï¼š

```typescript
// ç¤ºä¾‹ï¼šæ·»åŠ æ—¥è¯­æ”¯æŒ
import jaJP from 'antd/locale/ja_JP';

export const SUPPORTED_LANGUAGES: LanguageConfig[] = [
  {
    code: 'zh-CN',
    name: 'Chinese',
    nativeName: 'ç®€ä½“ä¸­æ–‡',
    antdLocale: zhCN,
    flag: 'ğŸ‡¨ğŸ‡³',
  },
  {
    code: 'en-US',
    name: 'English',
    nativeName: 'English',
    antdLocale: enUS,
    flag: 'ğŸ‡ºğŸ‡¸',
  },
  {
    code: 'ja-JP',
    name: 'Japanese',
    nativeName: 'æ—¥æœ¬èª',
    antdLocale: jaJP,
    flag: 'ğŸ‡¯ğŸ‡µ',
  },
];
```

### æ­¥éª¤ 2: åˆ›å»ºç¿»è¯‘æ–‡ä»¶ç›®å½•

åœ¨ `locales/` ä¸‹åˆ›å»ºæ–°è¯­è¨€çš„æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ `ja-JP/`ï¼š

```bash
mkdir -p locales/ja-JP
```

### æ­¥éª¤ 3: å¤åˆ¶ç¿»è¯‘æ–‡ä»¶æ¨¡æ¿

å°†ç°æœ‰è¯­è¨€çš„ JSON æ–‡ä»¶å¤åˆ¶åˆ°æ–°è¯­è¨€ç›®å½•ï¼š

```bash
cp locales/zh-CN/*.json locales/ja-JP/
```

### æ­¥éª¤ 4: ç¿»è¯‘å†…å®¹

æ‰“å¼€æ–°è¯­è¨€ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶ï¼Œå°†ä¸­æ–‡ç¿»è¯‘æ›¿æ¢ä¸ºç›®æ ‡è¯­è¨€ï¼š

```json
// locales/ja-JP/common.json
{
  "appName": "ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼è³‡ç”£ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ",
  "actions": {
    "create": "ä½œæˆ",
    "edit": "ç·¨é›†",
    "delete": "å‰Šé™¤",
    ...
  }
}
```

### æ­¥éª¤ 5: åœ¨ `i18n.ts` ä¸­å¯¼å…¥æ–°è¯­è¨€èµ„æº

æ‰“å¼€ `src/i18n.ts`ï¼Œæ·»åŠ æ–°è¯­è¨€çš„å¯¼å…¥å’Œèµ„æºé…ç½®ï¼š

```typescript
// å¯¼å…¥æ—¥è¯­ç¿»è¯‘
import jaJP_common from './locales/ja-JP/common.json';
import jaJP_menu from './locales/ja-JP/menu.json';
import jaJP_dataCenter from './locales/ja-JP/dataCenter.json';

// åœ¨ resources ä¸­æ·»åŠ 
resources: {
  'zh-CN': { ... },
  'en-US': { ... },
  'ja-JP': {
    common: jaJP_common,
    menu: jaJP_menu,
    dataCenter: jaJP_dataCenter,
  },
}
```

### æ­¥éª¤ 6: æµ‹è¯•

1. åˆ·æ–°æµè§ˆå™¨
2. åœ¨å³ä¸Šè§’çš„è¯­è¨€åˆ‡æ¢å™¨ä¸­é€‰æ‹©æ–°è¯­è¨€
3. éªŒè¯æ‰€æœ‰æ–‡æœ¬æ˜¯å¦æ­£ç¡®æ˜¾ç¤º

## å‘½åç©ºé—´ (Namespace)

ç¿»è¯‘æ–‡ä»¶æŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ†ä¸ºä¸åŒçš„å‘½åç©ºé—´ï¼š

- **common**: é€šç”¨æ–‡æœ¬ï¼ˆæŒ‰é’®ã€çŠ¶æ€ã€éªŒè¯ä¿¡æ¯ç­‰ï¼‰
- **menu**: å¯¼èˆªèœå•
- **dataCenter**: æ•°æ®ä¸­å¿ƒæ¨¡å—
- **room**: æœºæˆ¿æ¨¡å—
- **cabinet**: æœºæŸœæ¨¡å—
- **device**: è®¾å¤‡æ¨¡å—
- **panel**: é¢æ¿æ¨¡å—
- **port**: ç«¯å£æ¨¡å—
- **cable**: çº¿ç¼†æ¨¡å—
- **opticalModule**: å…‰æ¨¡å—æ¨¡å—

æ·»åŠ æ–°å‘½åç©ºé—´æ—¶ï¼Œéœ€è¦åœ¨ `index.ts` çš„ `NAMESPACES` æ•°ç»„ä¸­æ³¨å†Œã€‚

## ä½¿ç”¨ç¿»è¯‘

### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```tsx
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation(['common', 'dataCenter']);

  return (
    <div>
      <h1>{t('dataCenter:title')}</h1>
      <Button>{t('common:actions.create')}</Button>
    </div>
  );
}
```

### æ’å€¼

æ”¯æŒå˜é‡æ’å€¼ï¼š

```json
{
  "welcome": "æ¬¢è¿ï¼Œ{{name}}"
}
```

```tsx
t('welcome', { name: 'John' }) // è¾“å‡º: æ¬¢è¿ï¼ŒJohn
```

### å¤æ•°å½¢å¼

```json
{
  "items": "{{count}} ä¸ªé¡¹ç›®",
  "items_plural": "{{count}} ä¸ªé¡¹ç›®"
}
```

```tsx
t('items', { count: 1 }) // 1 ä¸ªé¡¹ç›®
t('items', { count: 5 }) // 5 ä¸ªé¡¹ç›®
```

## ç¿»è¯‘æ–‡ä»¶è§„èŒƒ

1. **é”®åä½¿ç”¨é©¼å³°å‘½åæ³•**: `createSuccess`ã€`deleteConfirm`
2. **åµŒå¥—å±‚çº§ä¸è¶…è¿‡ 3 å±‚**: ä¾¿äºç»´æŠ¤å’ŒæŸ¥æ‰¾
3. **ä¿æŒä¸€è‡´æ€§**: ç›¸åŒåŠŸèƒ½çš„æ–‡æœ¬ä½¿ç”¨ç›¸åŒçš„é”®å
4. **é¿å…ç¡¬ç¼–ç **: æ‰€æœ‰ç”¨æˆ·å¯è§çš„æ–‡æœ¬éƒ½åº”è¯¥é€šè¿‡ i18n ç®¡ç†
5. **å ä½ç¬¦ä½¿ç”¨åŒå¤§æ‹¬å·**: `{{variable}}`

## è¯­è¨€ä»£ç è§„èŒƒ

ä½¿ç”¨ BCP 47 è¯­è¨€æ ‡ç­¾ï¼š

- `zh-CN`: ç®€ä½“ä¸­æ–‡
- `en-US`: ç¾å¼è‹±è¯­
- `ja-JP`: æ—¥è¯­
- `ko-KR`: éŸ©è¯­
- `fr-FR`: æ³•è¯­
- `de-DE`: å¾·è¯­

## è‡ªåŠ¨è¯­è¨€æ£€æµ‹

ç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æ£€æµ‹ç”¨æˆ·è¯­è¨€ï¼š

1. localStorage ä¸­ä¿å­˜çš„è¯­è¨€é€‰æ‹©
2. æµè§ˆå™¨è¯­è¨€è®¾ç½®
3. é»˜è®¤è¯­è¨€ï¼ˆzh-CNï¼‰

## å¼€å‘æŠ€å·§

### 1. æŸ¥æ‰¾æœªç¿»è¯‘çš„æ–‡æœ¬

```bash
# æœç´¢ç¡¬ç¼–ç çš„ä¸­æ–‡
grep -r "[\u4e00-\u9fa5]" src/pages/ src/components/
```

### 2. éªŒè¯ JSON æ ¼å¼

```bash
# ä½¿ç”¨ jq éªŒè¯ JSON æ ¼å¼
cat locales/zh-CN/common.json | jq .
```

### 3. å¯¹æ¯”ç¿»è¯‘æ–‡ä»¶

ç¡®ä¿æ‰€æœ‰è¯­è¨€çš„é”®åä¸€è‡´ï¼š

```bash
# æå–æ‰€æœ‰é”®å
jq -r 'paths | join(".")' locales/zh-CN/common.json > zh-keys.txt
jq -r 'paths | join(".")' locales/en-US/common.json > en-keys.txt
diff zh-keys.txt en-keys.txt
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å¤„ç†ç¿»è¯‘ç¼ºå¤±ï¼Ÿ

A: ç³»ç»Ÿä¼šå›é€€åˆ°é»˜è®¤è¯­è¨€ï¼ˆzh-CNï¼‰çš„ç¿»è¯‘ã€‚ç¡®ä¿æ‰€æœ‰è¯­è¨€çš„é”®åç»“æ„ä¸€è‡´ã€‚

### Q: å¦‚ä½•åŠ¨æ€åŠ è½½ç¿»è¯‘æ–‡ä»¶ï¼Ÿ

A: ç›®å‰ä½¿ç”¨é™æ€å¯¼å…¥ã€‚å¦‚éœ€åŠ¨æ€åŠ è½½ï¼Œå¯ä»¥ä¿®æ”¹ `i18n.ts` ä½¿ç”¨ i18next çš„ `backend` æ’ä»¶ã€‚

### Q: è¯­è¨€åˆ‡æ¢åé¡µé¢æ²¡æœ‰æ›´æ–°ï¼Ÿ

A: ç¡®ä¿ç»„ä»¶ä½¿ç”¨äº† `useTranslation` hookï¼Œå¹¶ä¸”ä½¿ç”¨ `t()` å‡½æ•°åŒ…è£¹æ–‡æœ¬ã€‚

## è´¡çŒ®æŒ‡å—

æ·»åŠ æ–°ç¿»è¯‘æˆ–ä¿®æ­£ç°æœ‰ç¿»è¯‘æ—¶ï¼š

1. ç¡®ä¿ JSON æ ¼å¼æ­£ç¡®
2. ä¿æŒé”®åä¸å…¶ä»–è¯­è¨€ä¸€è‡´
3. é¿å…æœºå™¨ç¿»è¯‘ï¼Œå°½é‡ä½¿ç”¨åœ°é“çš„è¡¨è¾¾
4. æµ‹è¯•æ‰€æœ‰ç›¸å…³é¡µé¢
5. æäº¤ PR æ—¶æ³¨æ˜ä¿®æ”¹çš„è¯­è¨€å’Œæ¨¡å—
